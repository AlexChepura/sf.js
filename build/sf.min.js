!function t(e,s,o){function n(i,a){if(!s[i]){if(!e[i]){var c="function"==typeof require&&require;if(!a&&c)return c(i,!0);if(r)return r(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var u=s[i]={exports:{}};e[i][0].call(u.exports,function(t){var s=e[i][1][t];return n(s?s:t)},u,u.exports,t,e,s,o)}return s[i].exports}for(var r="function"==typeof require&&require,i=0;i<o.length;i++)n(o[i]);return n}({1:[function(t,e,s){"use strict";t("./lib/shim/console");var o={modules:{core:{Ajax:t("./lib/core/Ajax"),BaseDOMConstructor:t("./lib/core/BaseDOMConstructor"),DomMutations:t("./lib/core/DomMutations"),Events:t("./lib/core/Events"),InstancesController:t("./lib/core/InstancesController")},helpers:{DOMEvents:t("./lib/helpers/DOMEvents"),domTools:t("./lib/helpers/domTools"),LikeFormData:t("./lib/helpers/LikeFormData"),tools:t("./lib/helpers/tools")}}};o.instancesController=new o.modules.core.InstancesController(o),o.domMutation=new o.modules.core.DomMutations(o.instancesController),o.ajax=new o.modules.core.Ajax(window.csrfToken?{headers:{"X-CSRF-Token":window.csrfToken}}:null),window.spiral=o,window.spiralFrontend=o,window.hasOwnProperty("sf")||(window.sf=o),t("./lib/helpers/tools/iterateInputs.js"),t("./lib/core/ajax/actions.js"),t("./lib/vendor/formToObject"),t("./lib/instances/form/Form.js"),t("./lib/instances/form/addons/formMessages/formMessages"),t("./lib/instances/lock/Lock.js")},{"./lib/core/Ajax":2,"./lib/core/BaseDOMConstructor":3,"./lib/core/DomMutations":4,"./lib/core/Events":5,"./lib/core/InstancesController":6,"./lib/core/ajax/actions.js":7,"./lib/helpers/DOMEvents":8,"./lib/helpers/LikeFormData":9,"./lib/helpers/domTools":10,"./lib/helpers/tools":11,"./lib/helpers/tools/iterateInputs.js":12,"./lib/instances/form/Form.js":13,"./lib/instances/form/addons/formMessages/formMessages":14,"./lib/instances/lock/Lock.js":15,"./lib/shim/console":16,"./lib/vendor/formToObject":17}],2:[function(t,e,s){"use strict";var o=t("../helpers/tools"),n=t("../core/Events"),r=t("../helpers/LikeFormData"),i=function(t){this.currentRequests=0,this.events=new n(["beforeSend","load"]),t&&t.headers&&(this.headers=o.extend(this.headers,t.headers))};i.prototype.headers={"X-Requested-With":"XMLHttpRequest"},i.prototype.send=function(t){var e=this;(null===t.data||void 0===t.data||"undefined"===t.data)&&(t.data=null),t.method||(t.method="POST"),t.headers=t.headers?o.extend(this.headers,t.headers):this.headers;var s,n=new Promise(function(o,n){t.url||(console.error("You should provide url"),n("You should provide url")),e.currentRequests++;var i=!1;"undefined"!=typeof window&&window.XDomainRequest&&window.XMLHttpRequest&&void 0===(new XMLHttpRequest).responseType&&0===url.indexOf("http")?(s=new XDomainRequest,i=!0,s.onprogress=function(e){t.onProgress&&t.onProgress(e)}):(s=new XMLHttpRequest,t.onProgress&&s.upload.addEventListener("progress",function(e){e.lengthComputable&&t.onProgress(e.loaded,e.total)},!1)),s.open(t.method,t.url),s.onload=function(){e.currentRequests--;var r=e._parseJSON(s);r.status?r.status>199&&r.status<300?o(r):r.status>399&&r.status<600?n(r):(console.error("unknown status %d. Rejecting",r.status),n(r)):i?o(r):n(r),t.response=r,e.events.trigger("load",t)},s.onerror=function(){e.currentRequests--,n(Error("Network Error"),s)},e.events.trigger("beforeSend",t);var a;null!==t.data?i?a="IEJSON"+JSON.stringify(t.data):(-1!==t.data.toString().indexOf("FormData")?a=t.data:(a=new r(t.data),t.headers["content-type"]=a.getContentTypeHeader()),e._setHeaders(s,t.headers)):a=null;try{s.send(a)}catch(c){s.send(a.toString())}return s});return t.isReturnXHRToo?[n,s]:n},i.prototype.sendRequest=i.prototype.send,i.prototype._setHeaders=function(t,e){for(var s in e)t.setRequestHeader(s,e[s])},i.prototype._parseJSON=function(t){t.response||(t.response=t.responseText);var e={},s=!1;if(t.getResponseHeader&&(s=t.getResponseHeader("Content-Type")),s&&"application/json"!==s.toLowerCase()&&"text/json"!==s.toLowerCase()&&"inode/symlink"!==s.toLowerCase())e={data:t.response};else try{e=JSON.parse(t.response)}catch(o){console.error("Not a JSON!",t.response),e={data:t.response}}return e.status||(e.status=t.status),"string"==typeof e.status&&0===e.status.indexOf("HTTP/")&&e.status.match(/ (\d\d\d)/)&&(e.status=parseInt(e.status.match(/ (\d\d\d)/)[1])),e.statusText||(e.statusText=t.statusText),t.status&&t.status!=e.status&&console.warn("Status from request %d, but response contains status %d",t.status,e.status),e},e.exports=i},{"../core/Events":5,"../helpers/LikeFormData":9,"../helpers/tools":11}],3:[function(t,e,s){"use strict";var o=t("../helpers/tools"),n=function(){};n.prototype.init=function(t,e,s){this.spiral=t,this.node=e,this.options=o.extend(this.getProcessedAttributes(e),this.getProcessedOptions(e)),s&&(this.options=o.extend(this.options,s))},n.prototype.attributesToGrab={},n.prototype.optionsToProcess={},n.prototype.getProcessedAttributes=function(t){var e,s,o,n={};for(e in this.attributesToGrab)this.attributesToGrab.hasOwnProperty(e)&&(s=this.attributesToGrab[e].key?this.attributesToGrab[e].key:e,o=t.attributes.hasOwnProperty(e)?t.attributes[e].value:null,this.attributesToGrab[e].processor?n[s]=this.attributesToGrab[e].processor(o,t,this):n[s]=o?o:this.attributesToGrab[e].value);return n},n.prototype.getProcessedOptions=function(t){var e,s={};for(e in this.optionsToProcess)this.optionsToProcess.hasOwnProperty(e)&&(this.optionsToProcess[e].processor?s[e]=this.optionsToProcess[e].processor.call(this,t):s[e]=this.optionsToProcess[e].value);return s},n.prototype.getAddon=function(t,e){return this.spiral.instancesController.getInstanceAddon(this.name,t,e)},e.exports=n},{"../helpers/tools":11}],4:[function(t,e,s){"use strict";var o=function(t){if(!t)return void console.error("You should provide instancesController  for DOM Mutation. Because DOM Mutation  should known all classes and");if(!this.constructor)return void console.error("Please call DomMutations with new  - 'new DomMutations()' ");this.instancesController=t;var e={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0,attributeOldValue:!0,attributeFilter:["class"]},s=this;this.observer=new MutationObserver(function(){s.onDomMutate.apply(s,arguments)}),this.observer.observe(document,e)};o.prototype.onDomMutate=function(t){var e=this.instancesController.getClasses(),s="."+e.join(",.");return 1===s.length?!1:(t.forEach(function(t){switch(t.type){case"attributes":this.processMutationAttributes(t,e);break;case"characterData":break;case"childList":this.processMutationChildList(t.addedNodes,"addInstance",s,e),this.processMutationChildList(t.removedNodes,"removeInstance",s,e);break;case"default":console.error("Something wrong. Contact tech support")}},this),!0)},o.prototype.processMutationAttributes=function(t,e){var s=this,o=t.target.className.split(" "),n=t.oldValue?t.oldValue.split(" "):[],r=o.filter(function(t){return-1===n.indexOf(t)}),i=n.filter(function(t){return-1===o.indexOf(t)}),a=r.filter(function(t){return-1!==e.indexOf(t)}),c=i.filter(function(t){return-1!==e.indexOf(t)});c.forEach(function(e){s.instancesController.removeInstance(s.instancesController.getInstanceNameByCssClass(e),t.target)}),a.forEach(function(e){s.instancesController.addInstance(s.instancesController.getInstanceNameByCssClass(e),t.target)})},o.prototype.processMutationChildList=function(t,e,s,o){function n(t){o.forEach(function(s){t.classList.contains(s)&&r.instancesController[e](r.instancesController.getInstanceNameByCssClass(s),t)})}var r=this;[].forEach.call(t,function(t){return 1!==t.nodeType||"SCRIPT"===t.nodeName||"LINK"===t.nodeName?!1:(n(t),[].forEach.call(t.querySelectorAll(s),n),!0)})},o.prototype.stopObserve=function(){this.observer.disconnect()},e.exports=o},{}],5:[function(t,e,s){"use strict";var o=function(t){this._storage={},this._allowedEvents=t};o.prototype.on=function(t,e){var s=t.replace(/\s{2,}/g," ").split(" ");s.forEach(function(s){return this._allowedEvents&&-1===this._allowedEvents.indexOf(s)?void console.warn("Events. Try to register event %s, but event is not allowed",s):(this._storage.hasOwnProperty(t)||(this._storage[s]=[]),void this._storage[s].push(e))},this)},o.prototype.registerAction=o.prototype.on,o.prototype.off=function(t,e){alert("You try to remove action. This part is incomplete")},o.prototype.trigger=function(t,e){if(this._allowedEvents&&-1===this._allowedEvents.indexOf(t))return void console.warn("Events. Try to trigger event %s, but event is not allowed",t);if(this._storage.hasOwnProperty(t))for(var s=0,o=this._storage[t].length;o>s;s++)this._storage[t][s](e)},o.prototype.performAction=o.prototype.trigger,e.exports=o},{}],6:[function(t,e,s){"use strict";var o=function(t){return this.spiral=t,this.constructor?void(this._storage={instancesConstructors:{cssClasses:{},jsConstructors:{}},addons:{},instances:{}}):void console.error("Please call InstancesController with new  - 'new InstancesController()' ")};o.prototype.registerInstanceType=function(t,e,s){var o=t.prototype.name;if(o||console.error("Instance constructor should have name inside it"),this._storage.instancesConstructors.jsConstructors.hasOwnProperty(o))return void console.error("Instance Constructor for type '%s' already added. Skipping",o);if(e&&(this._storage.instancesConstructors.cssClasses[e]=o),this._storage.instancesConstructors.jsConstructors[o]=t,this._storage.instances[o]=[],!s)for(var n=document.getElementsByClassName(e),r=0,i=n.length;i>r;r++)this.addInstance(o,n[r])},o.prototype.addInstanceType=function(t,e,s){return console.warn("addInstanceType is deprecated. Please use registerInstanceType instead"),this.registerInstanceType(e,s)},o.prototype.addInstance=function(t,e,s){var o=this._storage.instancesConstructors.jsConstructors[t],n=this.getInstance(t,e);if(!o||n)return!1;var r=new o(this.spiral,e,s);return this._storage.instances[t].push({node:e,instance:r}),r},o.prototype.removeInstance=function(t,e){var s,o=this.getInstance(t,e,!0);return o?(o.instance.die(),s=this._storage.instances[t].indexOf(o),-1!==s&&this._storage.instances[t].splice(s,1),!0):!1},o.prototype.getInstance=function(t,e,s){var o=this._storage.instances[t],n=!1;if(!o)return!1;if(e=e instanceof HTMLElement?e:document.getElementById(e),!e)return!1;for(var r=0,i=o.length;i>r;r++)if(o[r].node===e){n=s?o[r]:o[r].instance;break}return n},o.prototype.registerAddon=function(t,e,s,o){return this._storage.addons.hasOwnProperty(e)||(this._storage.addons[e]={}),this._storage.addons[e].hasOwnProperty(s)||(this._storage.addons[e][s]={}),this._storage.addons[e][s].hasOwnProperty(o)?void console.error("The %s addon type %s already registered for instance %s! Skipping registration.",o,s,e):void(this._storage.addons[e][s][o]=t)},o.prototype.getInstanceAddon=function(t,e,s){return this._storage.addons.hasOwnProperty(t)&&this._storage.addons[t].hasOwnProperty(e)&&this._storage.addons[t][e].hasOwnProperty(s)?this._storage.addons[t][e][s]:!1},o.prototype.getClasses=function(){return Object.keys(this._storage.instancesConstructors.cssClasses)},o.prototype.getInstanceNameByCssClass=function(t){return this._storage.instancesConstructors.cssClasses[t]},o.prototype.getInstanceConstructors=function(t){},e.exports=o},{}],7:[function(t,e,s){"use strict";!function(t){t.events.on("load",function(e){var s=e.response;if(s.hasOwnProperty("action"))if("string"==typeof s.action)t.actions.trigger(s.action);else if("object"==typeof s.action){var o=Object.keys(s.action);1===o.length?t.actions.trigger(o[0],s.action[o[0]],e):2===o.length&&s.action.delay?setTimeout(function(){var n=o.filter(function(t){return"delay"!==t})[0];t.actions.trigger(n,s.action[n],e)},+s.action.delay):o.length>1?setTimeout(function(){t.actions.trigger(s.action.name,s.action,e)},+s.action.delay||0):console.error("Action from server. Object doesn't have keys. ",s.action)}else console.error("Action from server. Something wrong. ",s.action)}),t.actions=new sf.modules.core.Events,t.actions.on("redirect",function(t){var e="[object String]"===Object.prototype.toString.call(t)?t:t.url;window.location[/^(?:[a-z]+:)?\/\//i.test(e)?"href":"pathname"]=e}),t.actions.on("reload",function(){location.reload()}),t.actions.on("refresh",function(){t.actions.trigger("reload")}),t.actions.on("close",function(){window.close()})}(sf.ajax)},{}],8:[function(t,e,s){"use strict";var o=function(){this._DOMEventsStorage=[]};o.prototype.add=function(t){"[object Array]"!==Object.prototype.toString.call([])&&(t=[t]),t.forEach(function(t){t.useCapture=!!t.useCapture,t.DOMNode.addEventListener(t.eventType,t.eventFunction,t.useCapture),this._DOMEventsStorage.push(t)},this)},o.prototype.remove=function(t){console.warn("TODO IMPLEMENT")},o.prototype.removeAll=function(){this._DOMEventsStorage.forEach(function(t){t.DOMNode.removeEventListener(t.eventType,t.eventFunction,t.useCapture)}),this._DOMEventsStorage=[]},e.exports=o},{}],9:[function(t,e,s){"use strict";var o=function(t,e){this.data={},t&&("[object Object]"!==Object.prototype.toString.call(t)?console.warn("LikeFormData can't accept non Object. Please reefer to documentation. Problem parameter is:",t):this.data=t),this.boundary=e?e:"SpiralFormData-"+Math.random().toString().substr(2)};o.prototype.append=function(t,e){this.data[t]=e},o.prototype.toString=function(){var t="",e=this.boundary,s=function(o,n){for(var r in o)o.hasOwnProperty(r)&&"undefined"!=typeof o[r]&&("object"==typeof o[r]?s(o[r],0===n.length?r:n+"["+r+"]"):t+="--"+e+"\r\nContent-Disposition: form-data; name="+(0===n.length?r:n+"["+r+"]")+"\r\n\r\n"+o[r]+"\r\n")};return"object"!=typeof this.data&&(this.data={data:this.data}),s(this.data,""),t+="--"+this.boundary+"--\r\n"},o.prototype["delete"]=function(t){return delete this.data[t]},o.prototype.get=function(t){return this.data[t]},o.prototype.getAll=function(){return this.data},o.prototype.has=function(t){return this.data.hasOwnProperty(t)},o.prototype.set=function(t){this.data[key]=t},o.prototype.getContentTypeHeader=function(){return"multipart/form-data; charset=utf-8; boundary="+this.boundary},e.exports=o},{}],10:[function(t,e,s){e.exports={closest:function(t,e){e="string"==typeof e?[e]:e;for(var s,o=e.length,n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;t&&t.parentNode;){for(s=0;o>s;s++)if(n.call(t,e[s]))return t;t=t.parentNode}return!1},closestByClassName:function(t,e){e="string"==typeof e?[e]:e;for(var s,o=e.length;t&&t.parentNode;){for(s=0;o>s;s++){var n=new RegExp("(\\s|^)"+e[s]+"(\\s|$)");if(t.className.match(n))return t}t=t.parentNode}return!1}}},{}],11:[function(t,e,s){"use strict";var o={extend:function(){for(var t,e={},s=0;s<arguments.length;s++)if("[object Object]"===Object.prototype.toString.call(arguments[s]))for(t in arguments[s])e[t]=arguments[s][t];else console.warn("Merging allowed only for objects. Passed value:",arguments[s]);return e}};e.exports=o},{}],12:[function(t,e,s){"use strict";!function(t){function e(t,o,n,r){for(var i in o)if(o.hasOwnProperty(i)){var a=r?r+"["+i+"]":i,c=Object.prototype.toString.call(o[i]),l="[name='"+a+"']";switch(c){case"[object Object]":e(t,o[i],n,a);break;case"[object Array]":o[i].forEach(function(e){var o="[name='"+a+"[]'][value='"+e+"']",r=t.querySelectorAll(o);0===r.length&&(console.warn(o," in Array not found"),s.push(o));for(var i=0,c=r.length;c>i;i++)n(r[i],!0)});break;case"[object String]":case"[object Number]":var u=t.querySelectorAll(l);if(0===u.length){console.warn(l," not found");var p={};p[a]=o[i],s.push(p)}for(var d=0,h=u.length;h>d;d++)n(u[d],o[i]);break;default:console.error("unknown type -",c," and message",o[i])}}}var s=[];t.modules.helpers.tools.iterateInputs=function(t,o,n,r){return s=[],e(t,o,n,r),0!==s.length&&console.log("Some element not found in form",s),s}}(sf)},{}],13:[function(require,module,exports){"use strict";!function(sf){var Form=function(t,e,s){this._construct(t,e,s)};Form.prototype=Object.create(sf.modules.core.BaseDOMConstructor.prototype),Form.prototype.name="form",Form.prototype._construct=function(t,e,s){var o={messagesOptions:{groups:{selector:".item-form",template:'<span class="msg">${message}</span>'},message:{template:'<div class="alert form-msg ${type}"><button class="btn-close">×</button><div class="msg">${message}</div></div>',closeBtnSelector:".btn-close"}}};this.init(t,e,t.modules.helpers.tools.extend(s||{},o)),this.options.fillFrom&&this.fillFieldsFrom(),this.DOMEvents=new this.spiral.modules.helpers.DOMEvents,this.addEvents(),this.events=new this.spiral.modules.core.Events(["onBeforeSend","onSuccess","onError","onAlways"])},Form.prototype.optionsToProcess={context:{processor:function(t){return t}},self:{processor:function(t){return this}}},Form.prototype.attributesToGrab={action:{key:"url",value:"/"},method:{value:"POST"},"data-lockType":{value:"default",key:"lockType"},"data-messagesType":{value:"spiral",key:"messagesType"},"data-messagePosition":{value:"bottom",key:"messagePosition"},"data-messagesPosition":{value:"bottom",key:"messagesPosition"},"data-useAjax":{value:!0,key:"useAjax",processor:function(t,e){return t=void 0!==t&&null!==t?t.toLowerCase():"",t="false"===t?!1:"true"===t?!0:this.value}},"data-callback":{value:!1,key:"ajaxCallback"},"data-before-submit":{value:!1,key:"beforeSubmitCallback"},"data-after-submit":{value:!1,key:"afterSubmitCallback"},"data-headers":{value:{Accept:"application/json"},key:"headers",processor:function(t,e,s){return void 0===t||null==t?this.value:(t=JSON.parse(t),t[Object.keys(this.value)[0]]?t:s.spiral.modules.helpers.tools.extend(t,this.value))}}},Form.prototype.onSubmit=function(t){return this.spiral.instancesController.getInstance("lock",this.node)?(t.preventDefault(),void t.stopPropagation()):(this.processMessages(!0),this.options.data=this.getFormData(),window.FormData||0===this.options.context.querySelectorAll("input[type='file']").length||(this.options.useAjax=!1),void(this.options.useAjax&&(this.send(this.options),t.preventDefault(),t.stopPropagation())))},Form.prototype.lock=function(t){this.options.lockType&&"none"!==this.options.lockType&&(t?this.spiral.instancesController.removeInstance("lock",this.node)||console.warn("You try to remove 'lock' instance, but it is not available or not started"):this.spiral.instancesController.addInstance("lock",this.node,{type:this.options.lockType})||console.warn("You try to add 'lock' instance, but it is not available or already started"))},Form.prototype.processMessages=function(t){this.options.messagesType&&this.getAddon("formMessages",this.options.messagesType)&&("[object Object]"===Object.prototype.toString.call(t)?this.getAddon("formMessages",this.options.messagesType).show(this.options,t):this.getAddon("formMessages",this.options.messagesType).clear(this.options))},Form.prototype.send=function(sendOptions){var that=this;if(this.lock(),sendOptions.beforeSubmitCallback){var fn=eval(sendOptions.beforeSubmitCallback);"function"==typeof fn&&fn.call(sendOptions)}this.spiral.ajax.send(sendOptions).then(function(t){return that.events.trigger("onSuccess",sendOptions),t},function(t){return that.events.trigger("onError",sendOptions),t}).then(function(t){that.lock(!0),that.processMessages(t),that.events.trigger("onAlways",sendOptions)})},Form.prototype.getFormData=function(){return window.FormData?new FormData(this.options.context):(console.log("Form `"+this.options.context+"` were processed without FormData."),new formToObject(this.options.context))},Form.prototype.setOptions=function(t){this.options=this.spiral.modules.helpers.tools.extend(this.options,t)},Form.prototype.addEvents=function(){var t=this;this.DOMEvents.add([{DOMNode:this.options.context,eventType:"submit",eventFunction:function(e){t.onSubmit.call(t,e)}}])},Form.prototype.die=function(){this.DOMEvents.removeAll()},sf.instancesController.registerInstanceType(Form,"js-sf-form")}(spiralFrontend)},{}],14:[function(t,e,s){"use strict";!function(t){function e(){this.removeEventListener("click",e);var t=this.parentNode;t.parentNode.removeChild(t)}function s(t,s,o){var n,r,i={message:s,type:o},a=t.messagesOptions.message.template,c=new DOMParser;for(var l in i)i.hasOwnProperty(l)&&(a=a.replace("${"+l+"}",i[l]));n=c.parseFromString(a,"text/html").firstChild.lastChild.firstChild,"bottom"===t.messagePosition?(r=t.context,r.appendChild(n)):"top"===t.messagePosition?(r=t.context,r.insertBefore(n,r.firstChild)):(r=document.querySelector(t.messagePosition),r.appendChild(n)),n.querySelector(t.messagesOptions.message.closeBtnSelector).addEventListener("click",e)}function o(e,s,o){var r=new DOMParser;t.modules.helpers.tools.iterateInputs(e.context,s,function(s,i){var a,c=t.modules.helpers.domTools.closest(s,e.messagesOptions.groups.selector),l={message:i},u=e.messagesOptions.groups.template;if(c){c.classList.add(o);for(var p in l)l.hasOwnProperty(p)&&(u=u.replace("${"+p+"}",l[p]));if(a=r.parseFromString(u,"text/html").firstChild.lastChild.firstChild,n||(n=a.className?a.className:"sf-group-message"),a.classList.add(n),"bottom"===e.messagesPosition)c.appendChild(a);else if("top"===e.messagesPosition)c.insertBefore(a,c.firstChild);else{var d=c.querySelector(e.messagesPosition);d.appendChild(a)}}})}var n="",r={show:function(t,e){if(e){var n=!1;if(e.message&&(s(t,e.message.text||e.message,e.message.type||"success"),n=!0),e.error&&(s(t,e.error,"error"),n=!0),e.warning&&(s(t,e.warning,"warning"),n=!0),e.messages&&(o(t,e.messages,"success"),n=!0),e.errors&&(o(t,e.errors,"error"),n=!0),e.warnings&&(o(t,e.warnings,"warning"),n=!0),!n){var r=e.status?e.status+" ":"";r+=e.statusText?e.statusText:"",r+=e.data&&!e.statusText?e.data:"",r+=0===r.length?e:"",s(t,r,"error")}}},clear:function(t){var s,o,r,i;if(s="bottom"===t.messagePosition||"top"===t.messagePosition?t.context.getElementsByClassName("form-msg")[0]:document.querySelector(t.messagePosition+">.form-msg"),s&&(s.getElementsByClassName("btn-close")[0].removeEventListener("click",e),s.parentNode.removeChild(s)),n){var a=t.context.querySelectorAll(t.messagesOptions.groups.selector+" ."+n);for(o=0,r=a.length;r>o;o++)i=a[o].parentNode,i.removeChild(a[o]),i.classList.remove("error","success","warning","info")}}};t.instancesController.registerAddon(r,"form","formMessages","spiral")}(spiralFrontend)},{}],15:[function(t,e,s){"use strict";!function(t){var e=function(t,e,s){this._construct(t,e,s)};e.prototype=Object.create(t.modules.core.BaseDOMConstructor.prototype),e.prototype.name="lock",e.prototype._construct=function(t,e,s){this.init(t,e,s),this.add(this.options.type,this.node)},e.prototype.add=function(t,e){if(!this.types.hasOwnProperty(t))return!1;var s=document.createElement("div");return s.className=this.types[t].className||"js-sf-lock",s.innerHTML=this.types[t].html,e.appendChild(s),e.classList.add("locked"),this.types[t].progress},e.prototype.die=function(){this.remove()},e.prototype.remove=function(){this.node.classList.remove("locked");var t=this.node.querySelector(".js-sf-lock");return t&&this.node.removeChild(t),!0},e.prototype.types={spinner:{html:'<div class="sf-spinner"></div>'},progress:{html:'<div class="sf-progress"><div class="progress-line"></div></div>',progress:function(t,e){var s=this.context.getElementsByClassName("progress-line")[0];s.style.width=100*(t/e)+"%"}}},e.prototype.types["default"]=e.prototype.types.spinner,t.instancesController.registerInstanceType(e)}(spiralFrontend)},{}],16:[function(t,e,s){!function(){for(var t,e=function(){},s=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],o=s.length,n=window.console=window.console||{};o--;)t=s[o],n[t]||(n[t]=e)}()},{}],17:[function(t,e,s){!function(){var t=function(t){return t?(this.formRef=t,this.keyRegex=/[^\[\]]+/g,this.$form=null,this.$formElements=[],this.formObj={},this.setForm()&&this.setFormElements()?this.setFormObj():!1):!1};t.prototype.setForm=function(){switch(typeof this.formRef){case"string":this.$form=document.getElementById(this.formRef);break;case"object":this.isDomNode(this.formRef)&&(this.$form=this.formRef)}return this.$form},t.prototype.setFormElements=function(){return this.$formElements=this.$form.querySelectorAll("input, textarea, select"),this.$formElements.length},t.prototype.isDomNode=function(t){return"object"==typeof t&&"nodeType"in t&&1===t.nodeType},t.prototype.forEach=function(t,e){if([].forEach)return[].forEach.call(t,e);var s;for(s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(t,t[s])},t.prototype.addChild=function(t,e,s,o){if(1===s.length){if("INPUT"===e.nodeName&&"radio"===e.type)return e.checked?t[s]=o:void 0;if("INPUT"===e.nodeName&&"checkbox"===e.type)return e.checked?(t[s]||(t[s]=[]),t[s].push(o)):void 0;if("SELECT"===e.nodeName&&"select-multiple"===e.type){t[s]=[];var n=e.querySelectorAll("option[selected]");return void(n&&this.forEach(n,function(e){t[s].push(e.value)}))}t[s]=o}return s.length>1?(t[s[0]]||(t[s[0]]={}),this.addChild(t[s[0]],e,s.splice(1,s.length),o)):t},t.prototype.setFormObj=function(){var t,e=0;for(e=0;e<this.$formElements.length;e++)this.$formElements[e].name&&!this.$formElements[e].disabled&&(t=this.$formElements[e].name.match(this.keyRegex),this.addChild(this.formObj,this.$formElements[e],t,this.$formElements[e].value));return this.formObj},"function"==typeof define&&define.amd?define(function(){return t}):window.formToObject=t}()},{}]},{},[1]);
//# sourceMappingURL=sf.min.js.map
