!function(t){function e(n){if(s[n])return s[n].exports;var o=s[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var s={};e.m=t,e.c=s,e.i=function(t){return t},e.d=function(t,s,n){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=10)}([function(t,e,s){"use strict";var n=function(t){this._storage={},this._allowedEvents=t};n.prototype.on=function(t,e){t.replace(/\s{2,}/g," ").split(" ").forEach(function(s){if(this._allowedEvents&&this._allowedEvents.indexOf(s)===-1)return void console.warn("Events. Try to register event %s, but event is not allowed",s);this._storage.hasOwnProperty(t)||(this._storage[s]=[]),this._storage[s].push(e)},this)},n.prototype.registerAction=n.prototype.on,n.prototype.off=function(t,e){alert("You try to remove action. This part is incomplete")},n.prototype.trigger=function(t,e){if(this._allowedEvents&&this._allowedEvents.indexOf(t)===-1)return void console.warn("Events. Try to trigger event %s, but event is not allowed",t);if(this._storage.hasOwnProperty(t))for(var s=0,n=this._storage[t].length;s<n;s++)this._storage[t][s](e)},n.prototype.performAction=n.prototype.trigger,t.exports=n},function(t,e,s){"use strict";var n=function(t,e){this.data={},t&&("[object Object]"!==Object.prototype.toString.call(t)?console.warn("LikeFormData can't accept non Object. Please reefer to documentation. Problem parameter is:",t):this.data=t),this.boundary=e?e:"SpiralFormData-"+Math.random().toString().substr(2)};n.prototype.append=function(t,e){this.data[t]=e},n.prototype.toString=function(){var t="",e=this.boundary,s=function(n,o){for(var r in n)n.hasOwnProperty(r)&&void 0!==n[r]&&("object"==typeof n[r]?s(n[r],0===o.length?r:o+"["+r+"]"):t+="--"+e+"\r\nContent-Disposition: form-data; name="+(0===o.length?r:o+"["+r+"]")+"\r\n\r\n"+n[r]+"\r\n")};return"object"!=typeof this.data&&(this.data={data:this.data}),s(this.data,""),t+="--"+this.boundary+"--\r\n"},n.prototype.delete=function(t){return delete this.data[t]},n.prototype.get=function(t){return this.data[t]},n.prototype.getAll=function(){return this.data},n.prototype.has=function(t){return this.data.hasOwnProperty(t)},n.prototype.set=function(t,e){this.data[t]=e},n.prototype.getContentTypeHeader=function(){return"multipart/form-data; charset=utf-8; boundary="+this.boundary},t.exports=n},function(t,e,s){var n={Ajax:s(3),BaseDOMConstructor:s(4),DomMutations:s(5),Events:s(0),InstancesController:s(6)},o={DOMEvents:s(7),domTools:s(8),LikeFormData:s(1),tools:s(9)},r={core:n,helpers:o,tools:o.tools};t.exports=r},function(t,e,s){"use strict";var n=s(0),o=s(1),r=function(t){this.currentRequests=0,this.events=new n(["beforeSend","load"]),t&&t.headers&&(this.headers=Object.assign(this.headers,t.headers))};r.prototype.headers={"X-Requested-With":"XMLHttpRequest"},r.prototype.send=function(t){var e=this;null!==t.data&&void 0!==t.data&&"undefined"!==t.data||(t.data=null),t.method||(t.method="POST"),t.headers=t.headers?Object.assign(t.headers,this.headers,t.headers):Object.assign({},this.headers);var s,n=new Promise(function(n,r){t.url||(console.error("You should provide url"),r("You should provide url")),e.currentRequests++;var a=!1;"undefined"!=typeof window&&window.XDomainRequest&&window.XMLHttpRequest&&void 0===(new XMLHttpRequest).responseType&&0===url.indexOf("http")?(s=new XDomainRequest,a=!0,s.onprogress=function(e){t.onProgress&&t.onProgress(e)}):(s=new XMLHttpRequest,t.onProgress&&s.upload.addEventListener("progress",function(e){e.lengthComputable&&t.onProgress(e.loaded,e.total)},!1)),s.open(t.method,t.url),s.onload=function(){e.currentRequests--;var o=e._parseJSON(s);o.status?o.status>199&&o.status<300?n(o):o.status>399&&o.status<600?r(o):(console.error("unknown status %d. Rejecting",o.status),r(o)):a?n(o):r(o),t.response=o,e.events.trigger("load",t)},s.onerror=function(){e.currentRequests--,r(Error("Network Error"),s)},e.events.trigger("beforeSend",t);var i;null!==t.data?a?i="IEJSON"+JSON.stringify(t.data):(t.data.toString().indexOf("FormData")!==-1?i=t.data:(i=new o(t.data),t.headers["content-type"]=i.getContentTypeHeader()),e._setHeaders(s,t.headers)):i=null;try{s.send(i)}catch(t){s.send(i.toString())}return s});return t.isReturnXHRToo?[n,s]:n},r.prototype._setHeaders=function(t,e){for(var s in e)e.hasOwnProperty(s)&&t.setRequestHeader(s,e[s])},r.prototype._parseJSON=function(t){t.response||(t.response=t.responseText);var e={},s=!1;if(t.getResponseHeader&&(s=t.getResponseHeader("Content-Type")),s&&"application/json"!==s.toLowerCase()&&"text/json"!==s.toLowerCase()&&"inode/symlink"!==s.toLowerCase())e={data:t.response};else try{e=JSON.parse(t.response)}catch(s){console.error("Not a JSON!",t.response),e={data:t.response}}return e.status||(e.status=t.status),"string"==typeof e.status&&0===e.status.indexOf("HTTP/")&&e.status.match(/ (\d\d\d)/)&&(e.status=parseInt(e.status.match(/ (\d\d\d)/)[1])),e.statusText||(e.statusText=t.statusText),t.status&&t.status!=e.status&&console.warn("Status from request %d, but response contains status %d",t.status,e.status),e},t.exports=r},function(t,e,s){"use strict";var n=function(){};n.prototype.init=function(t,e,s){this.sf=t,this.node=e,this.options=Object.assign(this.grabOptions(e),s)},n.prototype.optionsToGrab={},n.prototype.grabOptions=function(t){var e,s,n={};for(var o in this.optionsToGrab)this.optionsToGrab.hasOwnProperty(o)&&(e=null,this.optionsToGrab.hasOwnProperty(o)&&(s=this.optionsToGrab[o],s.hasOwnProperty("value")&&(e=s.value),this.sf.options.instances[this.name]&&this.sf.options.instances[this.name].hasOwnProperty(o)&&(e=this.sf.options.instances[this.name][o]),s.hasOwnProperty("domAttr")&&t.attributes.hasOwnProperty(s.domAttr)&&(e=t.attributes[s.domAttr].value),s.hasOwnProperty("processor")&&(e=s.processor.call(this,t,e,s)),null!==e&&(n[o]=e)));return n},t.exports=n},function(t,e,s){"use strict";var n=function(t){if(!t)return void console.error("You should provide instancesController  for DOM Mutation. Because DOM Mutation  should known all classes and");if(!this.constructor)return void console.error("Please call DomMutations with new  - 'new DomMutations()' ");this.instancesController=t;var e={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0,attributeOldValue:!0,attributeFilter:["class"]},s=this;this.observer=new MutationObserver(function(){s.onDomMutate.apply(s,arguments)}),this.observer.observe(document,e)};n.prototype.onDomMutate=function(t){var e=this.instancesController.getClasses(),s="."+e.join(",.");return 1!==s.length&&(t.forEach(function(t){switch(t.type){case"attributes":this.processMutationAttributes(t,e);break;case"characterData":break;case"childList":this.processMutationChildList(t.addedNodes,"addInstance",s,e),this.processMutationChildList(t.removedNodes,"removeInstance",s,e);break;case"default":console.error("Something wrong. Contact tech support")}},this),!0)},n.prototype.processMutationAttributes=function(t,e){var s=this,n=t.target.className.split(" "),o=t.oldValue?t.oldValue.split(" "):[],r=n.filter(function(t){return o.indexOf(t)===-1}),a=o.filter(function(t){return n.indexOf(t)===-1}),i=r.filter(function(t){return e.indexOf(t)!==-1});a.filter(function(t){return e.indexOf(t)!==-1}).forEach(function(e){s.instancesController.removeInstance(s.instancesController.getInstanceNameByCssClass(e),t.target)}),i.forEach(function(e){s.instancesController.addInstance(s.instancesController.getInstanceNameByCssClass(e),t.target)})},n.prototype.processMutationChildList=function(t,e,s,n){function o(t){n.forEach(function(s){t.classList.contains(s)&&r.instancesController[e](r.instancesController.getInstanceNameByCssClass(s),t)})}var r=this;[].forEach.call(t,function(t){return 1===t.nodeType&&"SCRIPT"!==t.nodeName&&"LINK"!==t.nodeName&&(o(t),[].forEach.call(t.querySelectorAll(s),o),!0)})},n.prototype.stopObserve=function(){this.observer.disconnect()},t.exports=n},function(t,e,s){"use strict";var n=function(t){if(this.spiral=t,!this.constructor)return void console.error("Please call InstancesController with new  - 'new InstancesController()' ");this._storage={instancesConstructors:{cssClasses:{},jsConstructors:{}},addons:{},instances:{}}};n.prototype.registerInstanceType=function(t,e,s){var n=t.prototype.name;if(n||console.error("Instance constructor should have name inside it"),this._storage.instancesConstructors.jsConstructors.hasOwnProperty(n))return void console.error("Instance Constructor for type '%s' already added. Skipping",n);if(e&&(this._storage.instancesConstructors.cssClasses[e]=n),this._storage.instancesConstructors.jsConstructors[n]=t,this._storage.instances[n]=[],!s)for(var o=document.getElementsByClassName(e),r=0,a=o.length;r<a;r++)this.addInstance(n,o[r])},n.prototype.addInstanceType=function(t,e,s){return console.warn("addInstanceType is deprecated. Please use registerInstanceType instead"),this.registerInstanceType(e,s)},n.prototype.addInstance=function(t,e,s){var n=this._storage.instancesConstructors.jsConstructors[t],o=this.getInstance(t,e);if(!instanceConstructor||o)return!1;var r=new n(this.spiral,e,s);return this._storage.instances[t].push({node:e,instance:r}),r},n.prototype.removeInstance=function(t,e){var s,n=this.getInstance(t,e,!0);return!!n&&(n.instance.die(),s=this._storage.instances[t].indexOf(n),s!==-1&&this._storage.instances[t].splice(s,1),!0)},n.prototype.getInstance=function(t,e,s){var n=this._storage.instances[t],o=!1;if(!n)return!1;if(!(e=e instanceof HTMLElement?e:document.getElementById(e)))return!1;for(var r=0,a=n.length;r<a;r++)if(n[r].node===e){o=s?n[r]:n[r].instance;break}return o},n.prototype.getInstances=function(t){return this._storage.instances[t]||!1},n.prototype.registerAddon=function(t,e,s,n){if(this._storage.addons.hasOwnProperty(e)||(this._storage.addons[e]={}),this._storage.addons[e].hasOwnProperty(s)||(this._storage.addons[e][s]={}),this._storage.addons[e][s].hasOwnProperty(n))return void console.error("The %s addon type %s already registered for instance %s! Skipping registration.",n,s,e);this._storage.addons[e][s][n]=t},n.prototype.getInstanceAddon=function(t,e,s){return!!(this._storage.addons.hasOwnProperty(t)&&this._storage.addons[t].hasOwnProperty(e)&&this._storage.addons[t][e].hasOwnProperty(s))&&this._storage.addons[t][e][s]},n.prototype.getClasses=function(){return Object.keys(this._storage.instancesConstructors.cssClasses)},n.prototype.getInstanceNameByCssClass=function(t){return this._storage.instancesConstructors.cssClasses[t]},n.prototype.getInstanceConstructors=function(t){},t.exports=n},function(t,e,s){"use strict";var n=function(){this._DOMEventsStorage=[]};n.prototype.add=function(t){"[object Array]"!==Object.prototype.toString.call([])&&(t=[t]),t.forEach(function(t){t.useCapture=!!t.useCapture,t.DOMNode.addEventListener(t.eventType,t.eventFunction,t.useCapture),this._DOMEventsStorage.push(t)},this)},n.prototype.remove=function(t){console.warn("TODO IMPLEMENT")},n.prototype.removeAll=function(){this._DOMEventsStorage.forEach(function(t){t.DOMNode.removeEventListener(t.eventType,t.eventFunction,t.useCapture)}),this._DOMEventsStorage=[]},t.exports=n},function(t,e){t.exports={closest:function(t,e){e="string"==typeof e?[e]:e;for(var s,n=e.length,o=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;t&&t.parentNode;){for(s=0;s<n;s++)if(o.call(t,e[s]))return t;t=t.parentNode}return!1},closestByClassName:function(t,e){e="string"==typeof e?[e]:e;for(var s,n=e.length;t&&t.parentNode;){for(s=0;s<n;s++){var o=new RegExp("(\\s|^)"+e[s]+"(\\s|$)");if(t.className.match(o))return t}t=t.parentNode}return!1}}},function(t,e,s){"use strict";var n={resolveKeyPath:function(t,e,s){return t.split(".").reduce(function(t,e){return s?t?t[e]:void 0:t[e]},e||self)}};t.exports=n},function(t,e,s){t.exports=s(2)}]);
//# sourceMappingURL=sf.js.map